% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/flag_result_belowLOD.R
\name{flag_result_belowLOD}
\alias{flag_result_belowLOD}
\title{Format SampleMaster Raw Data for Reporting}
\usage{
flag_result_belowLOD(path, add_lod_units = NULL)
}
\arguments{
\item{path}{Character. Path to the SampleMaster raw Excel file to process.}

\item{add_lod_units}{Optional tibble or data frame with columns `Parameter` (character)
and `units` (character) to append to the internal LOD unit check. To be used only as a
temporary stopgap until the internal lod_checkdata object can be updated. Default is `NULL`.}
}
\value{
A tibble identical to the raw SampleMaster data, except:
  - The `Result` column is coerced to numeric (unless replaced with `"<lod"`).
  - Values below the LOD are replaced with the string `"<lod"`.
}
\description{
This function reads raw output from SampleMaster software and formats it for dissemination.
It performs the following tasks:
}
\details{
1. Reads raw Excel data from SampleMaster.
2. Coerces the `Result` column to numeric (with warning if non-numeric values are present).
3. Pulls the labâ€™s limit-of-detection (LOD) values from the internal `LOD_values.xlsx` file,
to be updated annually by lab staff.
5. Checks that the units in the LOD file match expected units.
6. Replaces results below the LOD with `"<lod"`.


- Units in the LOD file (`LOD_values.xlsx`) are compared against `lod_checkdata`. A mismatch will throw an error.
- Missing LOD values for any parameter will also throw an error.
- The function returns a modified tibble; it does **not write to disk**.
}
\examples{
\dontrun{
# Process a raw SampleMaster file
formatted <- format_sampleMaster("data/raw_samplemaster.xlsx")

# Append new LOD unit before formatting
new_units <- tibble(Parameter = "Chloride", units = "mg/L")
formatted <- format_sampleMaster("data/raw_samplemaster.xlsx",
                                 add_lod_units = new_units)
}

}
